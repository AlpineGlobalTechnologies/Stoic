/* --- Root Variables --- */
:root { --header-height: 110px; --header-bg: #2a2b2c; --header-border: #d5d6d9; --header-text: #ffffff; --header-text-scrolled: #2a2b2c; }  

/* --- Header Base --- */
header { position: fixed; top: 0; left: 0; right: 0; height: var(--header-height); z-index: 1000; background: var(--header-bg); /*border-bottom: 1px solid var(--header-border);*/color: var(--header-text); display: flex; align-items: center; width: 100%; transform: translateY(0); transition: transform 0.45s cubic-bezier(0.4,0,0.2,1), opacity 0.3s ease, background 0.3s ease, color 0.3s ease; }  

/* --- Header Hidden on Scroll Down --- */
header.hidden { transform: translateY(-100%); opacity: 0; pointer-events: none; }  

/* --- Header Scrolled State --- */
header.scrolled { background: rgba(255,255,255,0.95); backdrop-filter: blur(8px); color: var(--header-text-scrolled); }  

/* --- Body Padding to Offset Header --- */
body { padding-top: var(--header-height); }  

/* --- Footer --- */
footer { border-top: 1px solid #eee; border-bottom: none; }  

/* --- Navigation Container --- */
header nav { display: flex; align-items: center; justify-content: space-between; max-width: 1400px; margin: 0 auto; padding: 0 0px; width: 100%; color: inherit; }  
header nav.desktop-header  { display: flex; }
header nav.mobile-header { display: none; }

/* --- Navigation Sections --- */
nav .left { flex: 0; }  
nav .center { flex: 1; }  
nav .right { flex: 0; gap: 60px; }  
nav > * { display: flex; align-items: center; gap: 0.75rem; }  

/* --- Links --- */
header nav a { color: inherit; text-decoration: none; }  
header nav > .right > a {padding: 42px 0; flex: 1 0 auto;}
header nav a:visited { color: inherit; }  
header.scrolled nav, header.scrolled nav a, header.scrolled nav a:visited { color: var(--header-text-scrolled); text-decoration: none; }  
header.scrolled nav.mobile-header .hamburger span { background: var(--header-text-scrolled); }


/* --- Right Nav Link Hover Underline --- */
nav .right > a::after,
nav .right > .nav-item::after  { content: ""; display: block; width: 0; height: 2px; background: currentColor; opacity: 0; transition: width 0.3s ease, opacity 0.3s ease; }  
nav .right > a:hover::after,
nav .right > .nav-item:hover::after { width: 100%; opacity: 1; }  

/* --- Nav Item Base --- */
.nav-item { position: relative; display: flex; flex-direction: column; padding: 42px 0;}  

/* --- Dropdown Submenu --- */
.nav-item .submenu { position: absolute; top: 110px; left: 50%; transform: translateX(-50%) translateY(0px); background: #fff; color: #2a2b2c; opacity: 0; pointer-events: none; transition: opacity 0.2s ease, transform 0.2s ease; z-index: 10; white-space: nowrap; display: flex; flex-direction: column; width: 200px; text-align: center; padding: 0px; border: 1px solid var(--header-border); border-top: 0; border-radius: 0 0 20px 20px; }  
.nav-item:hover .submenu { opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0); }  
.submenu a { padding: 15px 0px; background: white; border: 1px solid #eee; border-width: 0 0 1px 0; }
.submenu a:hover { background: #f5f5f5; }
.submenu a:last-child {border-bottom:none;border-radius: 0 0 20px 20px;}

/* --- Left Section Logo --- */
header .logo { pointer-events: none; }
header .left figure { margin: 0; font-size: 30px; }  


@media(max-width:1450px){
    header nav { padding: 0px 21.5px; }
}
@media(max-width:1000px){
    header nav.desktop-header {display: none;}
    header nav.mobile-header {display: flex;}
}

/* ───────────────────────────────────────────────
   Mobile Hamburger + Off-canvas Menu
   ─────────────────────────────────────────────── */

/* Hide checkbox but keep it functional */
.menu-toggle {
    display: none;
  }
  
  /* Hamburger icon */
  .hamburger {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 7px;
    width: 32px;
    height: 32px;
    cursor: pointer;
    z-index: 1201; /* slightly above header content if needed */
    transition: all 0.4s ease;
  }
  
  .hamburger span {
    width: 100%;
    height: 3px;
    background: var(--header-text);
    border-radius: 2px;
    transition: all 0.4s cubic-bezier(0.55, 0.055, 0.675, 0.19);
    transform-origin: center;
  }
  
  /* Morph to X when checked */
  .menu-toggle:checked + .hamburger span:nth-child(1) {
    transform: translateY(10px) rotate(135deg);
  }
  .menu-toggle:checked + .hamburger span:nth-child(2) {
    opacity: 0;
    transform: scaleX(0);
  }
  .menu-toggle:checked + .hamburger span:nth-child(3) {
    transform: translateY(-10px) rotate(-135deg);
  }
  
  /* Overlay / side menu container */
  .mobile-overlay-menu {
    position: fixed;
    inset: 0;
    background: rgba(42, 43, 44, 0.96);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    color: white;
    z-index: 1050;           /* higher than header's 1000, but not excessive */
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0.5s step-end;
  }
  
  /* KEY FIX: Use :has() on body to detect checked state anywhere */
  body:has(.menu-toggle:checked) .mobile-overlay-menu {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0.5s step-start;
  }
  
  /* Full overlay click-to-close area (behind content) */
  .overlay-close-label {
    position: absolute;
    inset: 0;
    cursor: pointer;
    z-index: 1; /* below content */
  }
  
  /* Content wrapper – prevents background close when clicking inside */
  .mobile-menu-content {
    position: relative;
    z-index: 2; /* above overlay label */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    pointer-events: auto;
  }
  
  /* Inner menu */
  .mobile-menu-inner {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 2.8rem;
    transform: translateX(60px);
    opacity: 0;
    transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
    padding:0 30px;
    width: 100%;
  }
  
  body:has(.menu-toggle:checked) .mobile-overlay-menu .mobile-menu-inner {
    transform: translateX(0);
    opacity: 1;
  }

  /* Close button (×) */
  .close-button {
    position: absolute;
    top: 25px;
    right: 20px;
    font-size: 3.8rem;
    color: white;
    opacity: 0.8;
    cursor: pointer;
    transition: opacity 0.3s, transform 0.3s;
    line-height: 1;
    user-select: none;
    z-index: 3;
  }
  
  .close-button:hover {
    opacity: 1;
    transform: rotate(90deg) scale(1.1);
  }
  
  
  /* Menu links */
  .mobile-menu-link,
  .mobile-submenu-title {
    font-size: 2.1rem;
    font-weight: 500;
    color: white;
    text-decoration: none;
    position: relative;
    transition: color 0.35s ease;
  }
  
  .mobile-menu-link:hover,
  .mobile-submenu-title:hover {
    color: #d5d6d9;
  }
  
  .mobile-menu-link::after {
    content: "";
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -8px;
    left: 50%;
    background: currentColor;
    transition: width 0.4s ease, left 0.4s ease;
  }
  
  .mobile-menu-link:hover::after {
    width: 100%;
    left: 0;
  }
  
  /* Submenu (unchanged) */
  .mobile-submenu-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.2rem;
  }
  
  .mobile-submenu {
    display: flex;
    flex-direction: column;
    gap: 1.4rem;
    opacity: 0.85;
  }
  
  .mobile-submenu-link {
    font-size: 1.4rem;
    color: #d5d6d9;
    text-decoration: none;
    transition: color 0.3s ease, transform 0.3s ease;
  }
  
  .mobile-submenu-link:hover {
    color: white;
    transform: translateX(8px);
  }
  
  /* Staggered entrance for menu items */
  .mobile-menu-inner > * {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.65s cubic-bezier(0.23, 1, 0.32, 1);
  }
  
  body:has(.menu-toggle:checked) .mobile-menu-inner > * {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* Stagger delay */
  .mobile-menu-inner > *:nth-child(1) { transition-delay: 0.1s; }
  .mobile-menu-inner > *:nth-child(2) { transition-delay: 0.2s; }
  .mobile-menu-inner > *:nth-child(3) { transition-delay: 0.3s; }
  
  /* Close button (×) – now visible and functional 
  .mobile-overlay-menu::before {
    content: "×";
    position: absolute;
    top: 30px;
    right: 30px;
    font-size: 3.8rem;
    color: white;
    opacity: 0.7;
    cursor: pointer;
    transition: opacity 0.3s, transform 0.3s;
  }*/
  
  /*
  body:has(.menu-toggle:checked) .mobile-overlay-menu::before {
    opacity: 1;
  }*/
  
  /* Make the × actually close the menu (clicking it unchecks via label association) 
  .mobile-overlay-menu::before {
    pointer-events: auto;
    z-index: 1100;
  }*/
  
  /* Optional: tap anywhere on overlay to close (add this if you want) */
  .mobile-overlay-menu {
    /* ... */
  }
  
  body:has(.menu-toggle:checked) .mobile-overlay-menu {
    /* ... */
  }
  
  /* If you want overlay click-to-close, add a pseudo-element or JS – pure CSS is trickier here */


#site-header form.button_to { width: 110px; order: 5; }
#site-header form.button_to button {border-color: var(--header-text); background: transparent; color: #fff; padding: 10px 20px; border-radius: 6px; cursor: pointer; transition: background 0.3s ease, color 0.3s ease; }
#site-header.scrolled form.button_to button { border-color:#2a2b2c; background:#2a2b2c; color:#fff; }
